"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5590],{55089:function(r,e,t){t.d(e,{Z:function(){return f}});var n=t(24246),o=t(68361),a=t(46895),i=t(2105),l=(t(27378),t(41460)),u=t(55169);function c(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function s(r,e){if(null==r)return{};var t,n,o=function(r,e){if(null==r)return{};var t,n,o={},a=Object.keys(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||(o[t]=r[t]);return o}(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function f(r){var e=r.marketName,t=s(r,["marketName"]);return(0,n.jsxs)(a.Z,function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){c(r,e,t[e])}))}return r}({},t,{alignItems:"center",children:[(0,n.jsx)(u.Z,{size:32,name:e}),(0,n.jsxs)(o.Z,{ml:2,children:[(0,n.jsx)(i.Z,{variant:"secondaryMedium",children:(0,l.Z)(e)}),(0,n.jsx)(i.Z,{variant:"small",color:"secondaryText",children:"s".concat(e.toUpperCase(),"-sUSD")})]})]}))}},24122:function(r,e,t){t.d(e,{Z:function(){return y}});var n=t(35230),o=t.n(n),a=t(6081),i=t(73018),l=t(6230),u=t(80907);function c(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function s(r,e,t,n,o,a,i){try{var l=r[a](i),u=l.value}catch(c){return void t(c)}l.done?e(u):Promise.resolve(u).then(n,o)}function f(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,l=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(r,e)||p(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(r){return function(r){if(Array.isArray(r))return c(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||p(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(r,e){if(r){if("string"===typeof r)return c(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(r,e):void 0}}var h=function(){var r,e=(r=o().mark((function r(e){var t,n,l,u;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.Z.positions(e);case 2:return t=r.sent,n=t.flatMap((function(r){return r.trades().map((function(e){return{event:e,position:r}}))})),l=t.flatMap((function(r){return r.collateralUpdates().map((function(e){return{event:e,position:r}}))})),u=(0,a.Z)(t.map((function(r){var e=r.settle();return e?{event:e,position:r}:null}))),r.abrupt("return",d(n).concat(d(l.filter((function(r){return r.event.isAdjustment}))),d(u)).sort((function(r,e){return e.event.blockNumber-r.event.blockNumber})));case 7:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(r){s(a,n,o,i,l,"next",r)}function l(r){s(a,n,o,i,l,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}(),m=[];function y(){var r=(0,u.Z)(),e=f((0,l.ZP)("OwnerTradeHistory",r?[r]:null,h),1)[0];return null!==e&&void 0!==e?e:m}},15590:function(r,e,t){t.r(e),t.d(e,{default:function(){return De}});var n=t(24246),o=t(50564),a=t(27378),i=t(37102),l=JSON.parse('[{"id":"btc-market","header":"New Market","title":"Trade Bitcoin options on Lyra.","cta":"Trade Bitcoin","linkHref":"/trade/btc","graphic":"images/bitcoin-logo.png","startTimestamp":1661990400,"expiryTimestamp":1664546400},{"id":"hop-bridge-giveaway","header":"Hop Giveaway","title":"Bridge via Hop Protocol and trade $100 for a chance to win 2000 OP.","cta":"View Details","linkHref":"/competition?pool=2","graphic":"images/hop_badge.png","startTimestamp":1662508800,"expiryTimestamp":1665126000},{"id":"trade-the-merge","header":"Trade the Merge","title":"Win up to 30k OP in Lyra\'s first mainnet trading competition.","cta":"View Details","linkHref":"/competition","graphic":"images/trade-the-merge.png","startTimestamp":1662595200,"expiryTimestamp":1665126000},{"id":"sol-vault","header":"Solana Vault","title":"Deposits to the Solana vault are now open.","cta":"Deposit Now","linkHref":"/vaults/sol","graphic":"images/solana-logo.png","startTimestamp":1664323200,"expiryTimestamp":1666911600}]'),u=t(69697),c=t(62274),s=t(95537),f=t(19749),d=t(94531),p=t(46895),h=t(47929),m=t(93752),y=t(8413),v=t(2105),b=t(93421),g=t(36065),j=t(42721);function x(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Z(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function w(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,l=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return x(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return x(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var O=function(r){var e=r.announcementIdx,t=r.numAnnouncements,o=r.onPrev,a=r.onNext;return(0,n.jsxs)(p.Z,{alignItems:"center",justifyContent:"flex-end",minWidth:140,children:[(0,n.jsx)(s.Z,{variant:"light",isTransparent:!0,icon:h.T.ChevronLeft,onClick:o}),(0,n.jsxs)(v.Z,{variant:"secondary",color:"secondaryText",mx:[0,1],children:[e+1," of ",t]}),(0,n.jsx)(s.Z,{variant:"light",isTransparent:!0,icon:h.T.ChevronRight,onClick:a})]})};function P(r){var e=r.announcement,t=r.announcementIdx,o=r.numAnnouncements,l=r.onPrev,x=r.onNext,P=w((0,c.Z)(u.rG),2),S=P[0],k=P[1],A=(0,a.useCallback)((function(){var r=JSON.parse(S);k(JSON.stringify(function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){Z(r,e,t[e])}))}return r}({},r,Z({},e.id,!1))))}),[e,S,k]),T=(0,i.Z)();return(0,n.jsx)(f.Z,{height:"100%",children:(0,n.jsxs)(d.Z,{flexDirection:"row",alignItems:"center",height:"100%",children:[e.graphic?(0,n.jsx)(m.Z,{mr:6,src:(0,g.Z)(e.graphic),width:64,minWidth:64,height:64,minHeight:64}):null,(0,n.jsxs)(p.Z,{flexDirection:"column",flexGrow:1,children:[(0,n.jsx)(v.Z,{variant:"heading",color:"text",children:e.header}),(0,n.jsx)(v.Z,{variant:"secondary",mt:2,color:"secondaryText",children:e.title}),(0,n.jsx)(y.Z,{showRightIcon:!0,textVariant:"secondary",mt:2,href:e.linkHref,target:e.linkTarget,onClick:function(){return(0,j.Z)(b.g.NavPortfolioAnnouncementCTAClick,{id:e.id})},children:e.cta})]}),(0,n.jsxs)(p.Z,{flexDirection:"column",justifyContent:"space-between",alignItems:"flex-end",height:"100%",ml:"auto",children:[(0,n.jsx)(s.Z,{variant:"light",icon:h.T.X,onClick:A}),T?null:(0,n.jsx)(O,{numAnnouncements:o,announcementIdx:t,onNext:x,onPrev:l})]})]})})}function S(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function k(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,l=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return S(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(){var r=(0,a.useState)(0),e=r[0],t=r[1],o=k((0,c.Z)(u.rG),1)[0],i=(0,a.useMemo)((function(){var r,e=null!==(r=JSON.parse(o))&&void 0!==r?r:{},t=Math.floor(Date.now()/1e3);return l.filter((function(r){var n=void 0===e[r.id]||!!e[r.id];return t>r.startTimestamp&&t<r.expiryTimestamp&&n})).sort((function(r,e){return e.startTimestamp-r.startTimestamp}))}),[o]),s=e<i.length?e:i.length>0?i.length-1:0,f=i[s];return f?(0,n.jsx)(P,{announcement:f,numAnnouncements:i.length,announcementIdx:s,onNext:function(){s+1<i.length&&t(s+1)},onPrev:function(){s-1>=0&&t(s-1)}},f.id):null}var T=t(68361),C=t(73066),I=t(58316),V=t(11913),D=t(34317),M=t(6692),N=t(93327),H=t(77989),E=t(95815),U=t(96403),G=t(59587),B=t(57111),$=t(71146),_=t(92110),z=t(49027),L=t(42002),R=t(35230),F=t.n(R),W=t(37009),q=t(73018),J=t(6230),K=t(80907);function X(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Y(r,e,t,n,o,a,i){try{var l=r[a](i),u=l.value}catch(c){return void t(c)}l.done?e(u):Promise.resolve(u).then(n,o)}function Q(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,l=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return X(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return X(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rr=function(){var r,e=(r=F().mark((function r(e,t){var n,o;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q.Z.provider.getBlock("latest");case 2:return n=r.sent,o=(0,W.Z)(n.timestamp,t),r.next=6,q.Z.account(e).portfolioHistory(o);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(r){Y(a,n,o,i,l,"next",r)}function l(r){Y(a,n,o,i,l,"throw",r)}i(void 0)}))});return function(r,t){return e.apply(this,arguments)}}(),er=[];function tr(r){var e=(0,K.Z)(),t=Q((0,J.ZP)("PortfolioHistory",e&&r?[e,r]:null,rr),1)[0];return null!==t&&void 0!==t?t:er}var nr=t(85556);function or(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ar(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ir(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){ar(r,e,t[e])}))}return r}function lr(r,e){if(null==r)return{};var t,n,o=function(r,e){if(null==r)return{};var t,n,o={},a=Object.keys(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||(o[t]=r[t]);return o}(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function ur(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,l=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return or(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return or(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var cr=(0,_.Z)((function(r){var e=r.period,t=r.hoverSnapshot,o=r.onHover,a=lr(r,["period","hoverSnapshot","onHover"]),i=tr(e);if(0===i.length)return null;var l,u=i[i.length-1],c=i[0],s=null!==(l=null===t||void 0===t?void 0:t.totalValue)&&void 0!==l?l:u.totalValue,f=0===c.totalValue?0:(s-c.totalValue)/c.totalValue;return(0,n.jsx)(z.Z,ir({},a,{type:"linear",xAxisDataKey:"timestamp",data:i,dataKeys:[{key:"totalValue",label:"timestamp"}],lineColor:f>=0?"primary":"error",onHover:function(r){o(r)},range:function(r){var e=ur(r,2);return[.8*e[0],1.2*e[1]]},renderTooltip:function(r){return(0,nr.Z)(r.timestamp,e)}},a))}),(function(r){r.period,r.hoverSnapshot,r.onHover;var e=lr(r,["period","hoverSnapshot","onHover"]);return(0,n.jsx)(L.Z,ir({},e))})),sr=t(80215),fr=t(46092);function dr(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function pr(r,e,t,n,o,a,i){try{var l=r[a](i),u=l.value}catch(c){return void t(c)}l.done?e(u):Promise.resolve(u).then(n,o)}function hr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,l=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return dr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mr={longOptionValue:0,shortOptionValue:0,baseCollateralValue:0,baseAccountValue:0,stableCollateralValue:0,stableAccountValue:0,totalValue:0,positions:[],baseAccountBalances:[],stableAccountBalances:[]},yr=function(){var r,e=(r=F().mark((function r(e){return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,q.Z.account(e).portfolioBalance();case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(r){pr(a,n,o,i,l,"next",r)}function l(r){pr(a,n,o,i,l,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}();function vr(){var r=(0,K.Z)(),e=hr((0,J.ZP)("PortfolioBalance",r?[r]:null,yr),1)[0];return null!==e&&void 0!==e?e:mr}var br=t(41802),gr=t(33640),jr=t(56686),xr=t(57429),Zr=t(9570),wr=t(56119);function Or(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Pr(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){Or(r,e,t[e])}))}return r}function Sr(r,e){if(null==r)return{};var t,n,o=function(r,e){if(null==r)return{};var t,n,o={},a=Object.keys(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||(o[t]=r[t]);return o}(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}var kr=(0,_.Z)((function(r){var e=r.period,t=r.hoverSnapshot,o=Sr(r,["period","hoverSnapshot"]),a=tr(e),i=a[a.length-1];if(!a.length)return(0,n.jsx)(v.Z,{variant:"small",children:"-"});var l=null!==t&&void 0!==t?t:i,u=a[0],c=u&&l?l.totalValue-u.totalValue:0,s=c&&Math.floor(u.totalValue)>0?c/Math.floor(u.totalValue):0;return(0,n.jsxs)(v.Z,Pr({variant:"smallMedium",color:s>=0?"primaryText":"errorText"},o,{children:[c>=0?"+":"",(0,N.Z)(c)," (",(0,wr.Z)(s),")"]}))}),(function(r){r.period,r.hoverSnapshot;var e=Sr(r,["period","hoverSnapshot"]);return(0,n.jsx)(Zr.Z,Pr({variant:"smallMedium",width:100},e))}));function Ar(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Tr(){return Tr=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Tr.apply(this,arguments)}function Cr(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){Ar(r,e,t[e])}))}return r}var Ir=[E.r.OneWeek,E.r.OneMonth,E.r.ThreeMonths,E.r.AllTime],Vr=(0,_.Z)((function(r){var e=Tr({},r),t=(0,a.useState)(E.r.OneWeek),o=t[0],l=t[1],u=(0,a.useState)(null),c=u[0],s=u[1],h=(0,i.Z)(),y=vr(),x=y.totalValue,Z=(0,br.Z)().isConnected,w=(0,a.useState)(!1),O=w[0],P=w[1],S=(0,a.useState)(!1),k=S[0],A=S[1],D=(0,fr.Z)(G.Zc.Optimism),M=(0,sr.Z)("susd"),_=(0,n.jsxs)(I.Z,{justifyContent:"center",alignItems:"center",height:"100%",width:"100%",children:[(0,n.jsx)(m.Z,{src:(0,g.Z)("/images/logo.png"),mb:4,size:42}),(0,n.jsx)(v.Z,{variant:"title",mb:4,children:"Welcome to Lyra"}),(0,n.jsx)(v.Z,{textAlign:"center",variant:"secondary",color:"secondaryText",mb:6,children:"To start trading, swap to sUSD on Optimism"}),Z?(0,gr.Z)()?(0,n.jsx)(C.ZP,{size:"lg",variant:"primary",label:"Get Started",onClick:function(){A(!0),(0,j.Z)(b.g.OnboardingModalOpen)},width:280}):(0,n.jsx)(C.ZP,{size:"lg",variant:"primary",label:"Drip Stables and Synths",width:280,onClick:function(){return P(!0)}}):(0,n.jsx)(jr.Z,{size:"lg",width:280}),(0,n.jsx)(xr.Z,{isOpen:O,onClose:function(){return P(!1)}})]}),z=null!==c&&void 0!==c?c:y,L=z.baseCollateralValue+z.stableCollateralValue,R=z.baseAccountValue+z.stableAccountValue,F=z.longOptionValue+z.shortOptionValue,W=h?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(d.Z,{height:"100%",children:[(0,n.jsx)(v.Z,{variant:"title",children:"Portfolio"}),(0,n.jsx)(v.Z,{variant:"title",children:(0,N.Z)(z.totalValue,{dps:2})}),(0,n.jsx)(kr,{period:o,hoverSnapshot:c}),(0,n.jsx)(cr,{flexGrow:1,period:o,onHover:s,hoverSnapshot:c,mb:1}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(H.Z,{period:o,periods:Ir,onChangePeriod:l})})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.Z,{width:220,isHorizontal:!0,children:[(0,n.jsxs)(T.Z,{mb:4,children:[(0,n.jsx)(v.Z,{variant:"title",children:"Portfolio"}),(0,n.jsx)(v.Z,{variant:"title",children:(0,N.Z)(z.totalValue,{dps:2})}),(0,n.jsx)(kr,{hoverSnapshot:c,period:o})]}),(0,n.jsxs)(T.Z,{mb:4,children:[(0,n.jsx)(v.Z,{color:"secondaryText",variant:"secondary",mb:2,children:z.shortOptionValue<0?"Net Options":"Options"}),(0,n.jsx)(v.Z,{variant:"bodyMedium",children:(0,N.Z)(F,{dps:2})})]}),L>0?(0,n.jsxs)(T.Z,{mb:4,children:[(0,n.jsx)(v.Z,{color:"secondaryText",variant:"secondary",mb:2,children:"Short Collateral"}),(0,n.jsx)(v.Z,{variant:"bodyMedium",children:(0,N.Z)(L,{dps:2})})]}):null,(0,n.jsxs)(T.Z,{children:[(0,n.jsx)(v.Z,{color:"secondaryText",variant:"secondary",mb:2,children:"Free Collateral"}),(0,n.jsx)(v.Z,{variant:"bodyMedium",children:(0,N.Z)(R,{dps:2})})]})]}),(0,n.jsx)(V.Z,{isVertical:!0}),(0,n.jsxs)(I.Z,{flexGrow:1,children:[(0,n.jsx)(p.Z,{mb:2,justifyContent:"flex-end",children:(0,n.jsx)(H.Z,{period:o,periods:Ir,onChangePeriod:l})}),(0,n.jsx)(cr,{flexGrow:1,period:o,onHover:s,hoverSnapshot:c})]})]});return(0,n.jsxs)(f.Z,Cr({flexDirection:h?"column":"row",height:U._6},e,{children:[(0,n.jsx)($.ZP,{isOpen:k,onClose:function(){return A(!1)},defaultDestToken:D.eq(0)?B.M:null===M||void 0===M?void 0:M.address,step:D.eq(0)?$.CR.GetETH:$.CR.GetTokens}),x>0?W:_]}))}),(function(r){var e=Tr({},r);return(0,n.jsx)(f.Z,Cr({height:U._6,justifyContent:"center",alignItems:"center"},e,{children:(0,n.jsx)(d.Z,{width:"100%",height:"100%",children:(0,n.jsx)(D.Z,{height:"100%",children:(0,n.jsx)(M.ZP,{})})})}))})),Dr=(0,_.Z)((function(){var r=vr().totalValue;return(0,n.jsxs)(v.Z,{as:"span",children:["Portfolio ",(0,N.Z)(r)]})})),Mr=t(38938),Nr=t(47406);function Hr(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Er(r,e,t,n,o,a,i){try{var l=r[a](i),u=l.value}catch(c){return void t(c)}l.done?e(u):Promise.resolve(u).then(n,o)}function Ur(r){return function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(r){Er(a,n,o,i,l,"next",r)}function l(r){Er(a,n,o,i,l,"throw",r)}i(void 0)}))}}function Gr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,l=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Hr(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Br=function(){var r=Ur(F().mark((function r(){var e,t,n;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Math.floor((new Date).getTime()/1e3)-2592e3,r.next=3,q.Z.markets();case 3:return t=r.sent,r.next=6,Promise.all(t.map(function(){var r=Ur(F().mark((function r(t){var n,o,a,i;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.tradingVolumeHistory({startTimestamp:e});case 2:return n=r.sent,o=(0,Nr.Z)(n[0].totalNotionalVolume),a=(0,Nr.Z)(n[n.length-1].totalNotionalVolume),i=a-o,r.abrupt("return",i);case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()));case 6:return n=r.sent,r.abrupt("return",n.reduce((function(r,e){return r+e}),0));case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),$r=function(){var r=Gr((0,J.ZP)("TotalTradingVolume",[],Br),1)[0];return null!==r&&void 0!==r?r:0},_r=t(92675);function zr(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Lr(){return Lr=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Lr.apply(this,arguments)}var Rr=(0,_.Z)((function(){var r=(0,Mr.Z)(function(){var r=(0,_r.Z)(),e=(0,a.useMemo)((function(){return r.reduce((function(r,e){return r+(0,Nr.Z)(e.tvl)}),0)}),[r]);return null!==e&&void 0!==e?e:0}());return(0,n.jsx)(v.Z,{variant:"heading",color:"secondaryText",children:r})}),(function(){return(0,n.jsx)(Zr.Z,{variant:"heading"})})),Fr=(0,_.Z)((function(){var r=$r();return(0,n.jsx)(v.Z,{variant:"heading",color:"secondaryText",children:(0,Mr.Z)(r)})}),(function(){return(0,n.jsx)(Zr.Z,{variant:"heading"})})),Wr=(0,_.Z)((function(){var r=function(){var r=(0,_r.Z)();return(0,a.useMemo)((function(){return r.reduce((function(r,e){return r+(0,Nr.Z)(e.openInterest)*(0,Nr.Z)(e.spotPrice)}),0)}),[r])}(),e=(0,Mr.Z)(r);return(0,n.jsx)(v.Z,{variant:"heading",color:"secondaryText",children:e})}),(function(){return(0,n.jsx)(Zr.Z,{variant:"heading"})})),qr=function(r){var e=Lr({},r),t=(0,i.Z)();return(0,n.jsx)(f.Z,function(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){zr(r,e,t[e])}))}return r}({justifyContent:"space-between"},e,{children:(0,n.jsx)(d.Z,{width:"100%",children:(0,n.jsxs)(p.Z,{py:[2,4],width:"100%",justifyContent:"space-between",flexDirection:t?"column":"row",children:[(0,n.jsxs)(D.Z,{flexDirection:"column",width:["100%","30%"],mb:[8,0],children:[(0,n.jsx)(v.Z,{variant:"heading2",children:"Total Value Locked"}),(0,n.jsx)(Rr,{})]}),(0,n.jsxs)(D.Z,{flexDirection:"column",width:["100%","30%"],mb:[8,0],children:[(0,n.jsx)(v.Z,{variant:"heading2",children:"30D Volume"}),(0,n.jsx)(Fr,{})]}),(0,n.jsxs)(D.Z,{flexDirection:"column",width:["100%","30%"],children:[(0,n.jsx)(v.Z,{variant:"heading2",children:"Open Interest"}),(0,n.jsx)(Wr,{})]})]})})}))},Jr=t(86677),Kr=t(62848),Xr=t(65153),Yr=t(70614),Qr=t(24122),re=t(90473);function ee(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function te(){return te=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},te.apply(this,arguments)}function ne(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){ee(r,e,t[e])}))}return r}var oe=(0,_.Z)((function(){return(0,Qr.Z)().length>0?(0,n.jsx)(C.ZP,{ml:"auto",variant:"light",label:"History \u2192",href:(0,re.Z)({page:o.u.History})}):null})),ae=function(){return(0,n.jsxs)(p.Z,{px:6,alignItems:"center",children:[(0,n.jsx)(v.Z,{my:4,variant:"heading",children:"Open Positions"}),(0,n.jsx)(oe,{})]})},ie=(0,_.Z)((function(r){var e=te({},r),t=(0,Yr.Z)(),a=(0,Jr.useRouter)();return(0,n.jsx)(f.Z,ne({overflow:"hidden"},e,{children:(0,n.jsxs)(d.Z,{noPadding:!0,children:[(0,n.jsx)(ae,{}),t.length>0?(0,n.jsx)(Kr.Z,{positions:t,onClick:function(r){return a.push((0,re.Z)({page:o.u.Position,marketAddressOrName:r.marketName,positionId:r.id}))}}):(0,n.jsxs)(T.Z,{mx:6,mb:6,children:[(0,n.jsx)(v.Z,{variant:"secondary",color:"secondaryText",mb:4,children:"You have no open positions"}),(0,n.jsx)(C.ZP,{variant:"primary",label:"Start Trading",width:150,size:"md",rightIcon:h.T.ArrowRight,href:(0,re.Z)({page:o.u.Trade,marketAddressOrName:Xr.q})})]})]})}))}),(function(r){var e=te({},r);return(0,n.jsx)(f.Z,ne({},e,{height:163,children:(0,n.jsxs)(d.Z,{noPadding:!0,height:"100%",children:[(0,n.jsx)(ae,{}),(0,n.jsx)(D.Z,{flexGrow:1,children:(0,n.jsx)(M.ZP,{})})]})}))})),le=t(30310),ue=t(49883),ce=t(55089),se=function(r){var e=r.markets;return(0,n.jsx)(le.Z,{children:e.map((function(r){var e=r.market,t=r.spotPrice,a=r.spotPriceChange;return(0,n.jsx)(ue.Z,{href:(0,re.Z)({page:o.u.Trade,marketAddressOrName:e.name}),label:(0,n.jsx)(ce.Z,{marketName:e.name}),rightContent:(0,n.jsxs)(p.Z,{flexDirection:"column",children:[(0,n.jsx)(v.Z,{variant:"secondary",children:(0,N.Z)(t)}),(0,n.jsx)(v.Z,{variant:"small",color:a>=0?"primaryText":"errorText",children:(0,wr.Z)(a)})]})},e.address)}))})},fe=t(15537),de=t(98718),pe=function(r){var e=r.markets,t=(0,Jr.useRouter)(),i=(0,a.useMemo)((function(){return e.map((function(r){var e=r.market,n=r.spotPrice,a=r.spotPriceChange,i=r.openInterest,l=r.tradingVolume30D;return{market:e.name,price:n,pricePctChange:a,openInterest:i,openInterestDollar:i*n,symbol:e.name,tradingVolume30D:l,onClick:function(){(0,j.Z)(b.g.PortfolioMarketClick,{marketName:e.name,marketAddress:e.address}),t.push((0,re.Z)({page:o.u.Trade,marketAddressOrName:e.name}))}}}))}),[e,t]),l=(0,a.useMemo)((function(){return[{accessor:"market",Header:"Market",Cell:function(r){return(0,n.jsx)(ce.Z,{marketName:r.cell.value})}},{accessor:"price",Header:"24H Price",Cell:function(r){var e=(0,N.Z)(r.cell.value),t=(0,wr.Z)(r.row.original.pricePctChange,!1);return(0,n.jsxs)(p.Z,{flexDirection:"column",children:[(0,n.jsx)(v.Z,{variant:"secondary",children:e}),(0,n.jsx)(v.Z,{variant:"small",color:r.row.original.pricePctChange>=0?"primaryText":"errorText",children:t})]})}},{accessor:"openInterestDollar",Header:"Open Interest",Cell:function(r){return(0,n.jsxs)(T.Z,{children:[(0,n.jsx)(v.Z,{variant:"secondary",children:(0,Mr.Z)(r.cell.value)}),(0,n.jsxs)(v.Z,{variant:"small",color:"secondaryText",children:[(0,de.Z)(r.row.original.openInterest)," ",r.row.original.symbol]})]})}},{accessor:"tradingVolume30D",Header:"30D Volume",Cell:function(r){return(0,n.jsx)(v.Z,{variant:"secondary",children:(0,Mr.Z)(r.cell.value)})}}]}),[]);return(0,n.jsx)(fe.Z,{width:"100%",data:i,columns:l})};function he(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function me(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){he(r,e,t[e])}))}return r}var ye=function(r){return(0,i.Z)()?(0,n.jsx)(se,me({},r)):(0,n.jsx)(pe,me({},r))},ve=t(30810),be=t(25178);function ge(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function je(r,e,t,n,o,a,i){try{var l=r[a](i),u=l.value}catch(c){return void t(c)}l.done?e(u):Promise.resolve(u).then(n,o)}function xe(r){return function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(r){je(a,n,o,i,l,"next",r)}function l(r){je(a,n,o,i,l,"throw",r)}i(void 0)}))}}function Ze(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a=[],i=!0,l=!1;try{for(t=t.call(r);!(i=(n=t.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(u){l=!0,o=u}finally{try{i||null==t.return||t.return()}finally{if(l)throw o}}return a}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return ge(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ge(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var we=function(){var r=xe(F().mark((function r(){var e,t,n,o,a,i;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Math.floor((new Date).getTime()/1e3),t=e-2592e3,r.next=4,q.Z.markets();case 4:return n=r.sent,o=n.map((function(r){return r.name})),r.next=8,Promise.all(o.map(function(){var r=xe(F().mark((function r(t){var n,o;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={first:1,orderBy:"timestamp",orderDirection:"asc",where:{synth:"s".concat(t),timestamp_gte:e-86400,timestamp_lt:e}},r.next=3,ve.$X.query({query:be.jT,variables:n,fetchPolicy:"cache-first"});case 3:return o=r.sent.data,r.abrupt("return",{name:t,candles:o.candles});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()));case 8:return a=r.sent,r.next=11,Promise.all(n.map(function(){var r=xe(F().mark((function r(e){var n,o,i,l,u,c,s,f,d,p;return F().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=a.find((function(r){return r.name.toLowerCase()===e.name.toLowerCase()})),o=(0,Nr.Z)(e.spotPrice),l=parseFloat(null!==(i=null===n||void 0===n?void 0:n.candles[0].close)&&void 0!==i?i:"0"),u=l&&!isNaN(l)?(o-l)/l:0,r.next=7,e.tradingVolumeHistory({startTimestamp:t});case 7:return c=r.sent,s=(0,Nr.Z)(c[0].totalNotionalVolume),f=(0,Nr.Z)(c[c.length-1].totalNotionalVolume),d=f-s,p=e.liveBoards().reduce((function(r,e){return r+e.strikes().reduce((function(r,e){return r+((0,Nr.Z)(e.call().longOpenInterest.add(e.call().shortOpenInterest))+(0,Nr.Z)(e.put().longOpenInterest.add(e.put().shortOpenInterest)))}),0)}),0),r.abrupt("return",{market:e,spotPrice:o,spotPriceChange:u,tradingVolume30D:d,openInterest:p});case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()));case 11:return i=r.sent,r.abrupt("return",i);case 13:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),Oe=[];function Pe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Se(){return Se=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Se.apply(this,arguments)}function ke(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})))),n.forEach((function(e){Pe(r,e,t[e])}))}return r}var Ae=(0,_.Z)((function(r){var e=Se({},r),t=function(){var r=Ze((0,J.ZP)("MarketsTableData",[],we),1)[0];return null!==r&&void 0!==r?r:Oe}();return(0,n.jsx)(f.Z,ke({},e,{overflow:"hidden",children:(0,n.jsxs)(d.Z,{noPadding:!0,children:[(0,n.jsx)(v.Z,{mx:6,my:4,variant:"heading",children:"Markets"}),t.length>0?(0,n.jsx)(ye,{markets:t}):(0,n.jsx)(v.Z,{variant:"secondary",color:"secondaryText",children:"Failed to load markets"})]})}))}),(function(r){var e=Se({},r);return(0,n.jsx)(f.Z,ke({},e,{children:(0,n.jsxs)(d.Z,{noPadding:!0,children:[(0,n.jsx)(v.Z,{mx:6,my:4,variant:"heading",children:"Markets"}),(0,n.jsx)(D.Z,{height:201,children:(0,n.jsx)(M.ZP,{})})]})}))})),Te=t(42804),Ce=t(93314),Ie=function(){var r=(0,i.Z)();return(0,n.jsx)(Te.Z,{mobileCollapsedHeader:r?(0,n.jsx)(Dr,{}):null,children:(0,n.jsxs)(Ce.Z,{children:[(0,n.jsx)(Vr,{}),(0,n.jsx)(A,{}),(0,n.jsx)(ie,{}),(0,n.jsx)(Ae,{}),(0,n.jsx)(qr,{})]})})},Ve=t(66362);function De(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ve.Z,{title:"Portfolio",url:(0,re.Z)({page:o.u.Portfolio})}),(0,n.jsx)(Ie,{})]})}}}]);