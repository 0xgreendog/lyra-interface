"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{66999:function(e,t,r){r.d(t,{P:function(){return p},Z:function(){return h}});var n=r(35230),i=r.n(n),o=r(27378),a=r(73018),l=r(6230);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(u){return void r(u)}l.done?t(s):Promise.resolve(s).then(n,i)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){u(o,n,i,a,l,"next",e)}function l(e){u(o,n,i,a,l,"throw",e)}a(void 0)}))}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=function(){var e=c(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.Z.admin().isGlobalPaused();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function h(){return d((0,l.ZP)("IsGlobalPaused",[],f),1)[0]}var p=function(){var e=(0,l.Tu)("IsGlobalPaused",f);return(0,o.useCallback)(c(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),[e])}},68874:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(27378),i=r(27865);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){var t=a((0,i.Z)(e),2),r=t[0],o=t[1],l=(0,n.useCallback)((function(e){return o(e?e.toString():null)}),[o]);return[r?parseInt(r):null,l]}},65911:function(e,t,r){r.r(t),r.d(t,{__N_SSG:function(){return $e},default:function(){return Ge}});var n=r(24246),i=r(93327),o=r(27378),a=r(92110),l=r(65781),s=r(39561),u=r(72166),c=r(66362),d=r(19749),f=r(94531),h=r(34317),p=r(47929),m=r(2105),y=r(37102),v=r(86677),b=r(96403),g=r(93421),k=r(50564),x=r(85218),j=r(47114),O=r(78328),Z=r(58316),S=r(11913),C=r(48594),w=r(42721),P=r(6692),T=r(68361),B=r(46895),E=r(37393),I=r(14959),A=r(56119),M=r(74749),N=r(47406),_=r(82205),D=r(73066),R=r(73141),L=r(59517);function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var H=function(e){switch(e){case R.OK.EmptySize:case R.OK.EmptyPremium:case R.OK.Expired:case R.OK.TradingCutoff:case R.OK.InsufficientLiquidity:case R.OK.DeltaOutOfRange:return"Disabled";case R.OK.VolTooHigh:case R.OK.VolTooLow:case R.OK.IVTooHigh:return"Buy Only";case R.OK.IVTooLow:case R.OK.SkewTooHigh:case R.OK.SkewTooLow:return"Sell Only"}};function K(e){var t,r=e.quote,o=e.isCall,a=e.isBuy,l=e.isSelected,s=e.disabledReason,u=e.onSelected,c=void 0===u?L.Z:u,d=q(e,["quote","isCall","isBuy","isSelected","disabledReason","onSelected"]),f=!!s&&function(e){return e!==R.OK.InsufficientLiquidity}(s);return(0,n.jsx)(D.ZP,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){F(e,t,r[t])}))}return e}({variant:o&&a||!o&&!a?"primary":"error",width:(t=r.marketName,"btc"===t.toLowerCase()?142:128),showRightIconSeparator:!0,isOutline:!l,isDisabled:f,label:f&&s?H(s):(0,i.Z)(r.premium),onClick:function(e){e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopPropagation(),c(!l)},rightIcon:f?null:l?p.T.Check:p.T.Plus},d))}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var V=function(e){var t=e.isCall,r=e.isBuy,a=e.quotes,l=e.selectedOption,s=e.onSelectOption,u=z(e,["isCall","isBuy","quotes","selectedOption","onSelectOption"]),c=(0,o.useState)(null),d=c[0],f=c[1],h=null===l||void 0===l?void 0:l.strike().id;return(0,n.jsxs)(T.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){X(e,t,r[t])}))}return e}({},u,{children:[a.map((function(e){var a=e.option,l=e.bid,u=e.ask,c=r?l:u;return(0,n.jsxs)(o.Fragment,{children:[(0,n.jsxs)(Z.Z,{onClick:function(){f({option:a,bid:l,ask:u})},children:[(0,n.jsxs)(m.Z,{variant:"bodyMedium",color:"text",mb:4,children:[(0,i.Z)(a.strike().strikePrice)," ",a.isCall?"Call":"Put"]}),(0,n.jsxs)(B.Z,{alignItems:"center",children:[(0,n.jsxs)(T.Z,{children:[(0,n.jsx)(m.Z,{variant:"secondary",color:"secondaryText",mb:2,children:"Break Even"}),(0,n.jsx)(m.Z,{variant:"secondary",color:"text",children:(0,i.Z)(c.breakEven)})]}),(0,n.jsxs)(T.Z,{ml:6,children:[(0,n.jsx)(m.Z,{variant:"secondary",color:"secondaryText",mb:2,children:"Implied Vol"}),(0,n.jsx)(m.Z,{variant:"secondary",color:"text",children:c.iv.gt(0)&&c.iv.lt(M.Yu)?(0,A.Z)((0,N.Z)(c.iv),!0):"-"})]}),(0,n.jsx)(K,{ml:"auto",quote:c,isSelected:h===c.strike().id,onSelected:function(){return s(c.option())},disabledReason:c.disabledReason,isCall:t,isBuy:r})]})]}),(0,n.jsx)(S.Z,{})]},a.strike().id)})),(0,n.jsx)(E.Z,{isOpen:!!d,onClose:function(){return f(null)},title:d?(0,n.jsxs)(m.Z,{variant:"heading",ml:6,mt:6,children:[d.option.market().name," $",(0,N.Z)(d.option.strike().strikePrice)," ",t?"Call":"Put",(0,n.jsxs)(m.Z,{as:"span",color:"secondaryText",children:["\xa0\xb7\xa0Exp. ",(0,I.Z)(d.option.board().expiryTimestamp,!0)]})]}):"",children:d?(0,n.jsx)(Z.Z,{children:(0,n.jsx)(_.Z,{option:d.option,isBuy:r})}):null})]}))},$=r(15537);var G=r(52803),U=r(70092);function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=function(e){var t,r=e.isBuy,a=e.isCall,l=e.selectedOption,s=e.onSelectOption,u=e.quotes,c=(0,o.useState)({}),d=c[0],f=c[1],h=u.length?u[0].option.market():null,p=(0,U.Z)(null!==(t=null===h||void 0===h?void 0:h.name)&&void 0!==t?t:""),y=(0,o.useMemo)((function(){return e=u.map((function(e){var t=e.bid,i=e.ask,o=e.option,a=r?t:i,l=!!d[a.strike().id.toString()];return{id:a.strike().id.toString(),quote:a,strikeId:a.strike().id,marketAddressOrName:a.market().address,strike:(0,N.Z)(a.strike().strikePrice),iv:(0,N.Z)(a.iv),price:(0,N.Z)(a.pricePerOption),breakEven:(0,N.Z)(a.breakEven),disabledReason:a.disabledReason,isExpanded:l,onToggleExpand:function(e){f((function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Y(e,t,r[t])}))}return e}({},t,Y({},a.strike().id.toString(),e))})),(0,w.Z)(e?g.g.BoardStrikeExpand:g.g.BoardStrikeCollapse,function(e){return{marketName:e.marketName,marketAddress:e.marketAddress,isCall:e.isCall,strikeId:e.strikeId,strikePrice:e.strikePrice,boardId:e.boardId,expiryTimestamp:e.expiryTimestamp}}(a))},expanded:(0,n.jsxs)(T.Z,{pb:4,children:[(0,n.jsx)(m.Z,{variant:"bodyMedium",mb:4,children:"Stats"}),(0,n.jsx)(_.Z,{option:o,isBuy:r})]})}})),e.filter((function(e){return null!==e&&void 0!==e}));var e}),[u,r,d]),v=(0,o.useMemo)((function(){return[{accessor:"strike",Header:"Strike",disableSortBy:!0,Cell:function(e){return(0,n.jsx)(m.Z,{variant:"secondaryMedium",children:e.cell.value>0?(0,i.Z)(e.cell.value):"-"})}},{accessor:"breakEven",Header:"Break Even",disableSortBy:!0,Cell:function(e){return(0,n.jsx)(m.Z,{variant:"secondary",children:e.cell.value>0?(0,i.Z)(e.cell.value):"-"})}},{accessor:"iv",Header:"Implied Volatility",disableSortBy:!0,Cell:function(e){return(0,n.jsx)(m.Z,{variant:"secondary",children:e.cell.value>0&&e.cell.value<(0,N.Z)(M.Yu)?(0,A.Z)(e.cell.value,!0):"-"})}},{accessor:"price",Header:!h||p.eq(G.wx)?"Price":"Price (".concat((0,N.Z)(p)," ").concat(h.name,")"),disableSortBy:!0,Cell:function(e){var t=e.row.original,i=t.quote,o=t.strikeId,u=t.disabledReason,c=(null===l||void 0===l?void 0:l.strike().id)===o;return(0,n.jsx)(K,{quote:i,isSelected:c,onSelected:function(){return s(i.option())},isCall:a,isBuy:r,disabledReason:u})}}]}),[h,p,l,a,r,s]);return(0,n.jsx)(Z.Z,{noPadding:!0,children:(0,n.jsx)($.Z,{data:y,columns:v})})};function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Q(e,t,r[t])}))}return e}var ee=function(e){return(0,y.Z)()?(0,n.jsx)(V,J({},e)):(0,n.jsx)(W,J({},e))},te=r(66999),re=r(35230),ne=r.n(re),ie=r(3922),oe=r(73018),ae=r(64614);function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e,t,r,n,i,o,a){try{var l=e[o](a),s=l.value}catch(u){return void r(u)}l.done?t(s):Promise.resolve(s).then(n,i)}function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ce=function(){var e,t=(e=ne().mark((function e(t,r,n){return ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.Z.quoteBoard(t,r,ie.O$.from(n));case 2:return e.abrupt("return",e.sent.sort((function(e,t){return e.option.strike().strikePrice.gt(t.option.strike().strikePrice)?1:-1})));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){se(o,n,i,a,l,"next",e)}function l(e){se(o,n,i,a,l,"throw",e)}a(void 0)}))});return function(e,r,n){return t.apply(this,arguments)}}(),de=[];var fe=(0,a.Z)((function(e){var t=e.board,r=e.isCall,i=e.isBuy,a=e.selectedOption,l=e.onSelectOption,s=(0,U.Z)(t.market().name),u=function(e,t,r){var n=ue((0,ae.Z)("QuoteBoard",[e.market().name,e.id,t],ce),1)[0];return(0,o.useMemo)((function(){return(null!==n&&void 0!==n?n:de).filter((function(e){return e.option.isCall===r}))}),[r,n])}(t,s,r),c=!!(0,te.Z)(),d=u.length?u[0].option.market():null,f=(0,o.useMemo)((function(){return u.filter((function(e){return!e.ask.isDisabled||!e.bid.isDisabled})).filter((function(e){var t=i?e.bid:e.ask;return"btc"!==(null===d||void 0===d?void 0:d.name.toLowerCase())||36!==t.strikeId}))}),[u,i,d]);return c?(0,n.jsx)(h.Z,{minHeight:300,children:(0,n.jsx)(m.Z,{color:"secondaryText",children:"Trading is paused"})}):0===f.length?(0,n.jsx)(h.Z,{minHeight:300,children:(0,n.jsx)(m.Z,{variant:"secondary",color:"secondaryText",children:"No strikes are available for this expiry"})}):(0,n.jsx)(ee,{quotes:f,isCall:r,isBuy:i,selectedOption:a,onSelectOption:l})}),(function(){return(0,n.jsx)(h.Z,{minHeight:300,children:(0,n.jsx)(P.ZP,{})})})),he=function(e){var t=e.market,r=e.isCall,i=e.isBuy,a=e.selectedOption,l=e.selectedBoard,s=e.onSelectOption,u=e.onSelectBoard,c=e.onToggleBuy,f=e.onToggleCall,p=(0,o.useMemo)((function(){return t.liveBoards()}),[t]),m=(0,y.Z)(),v=(0,o.useState)(!1),b=v[0],k=v[1],P=(0,o.useCallback)((function(){return k(!1)}),[]);return(0,n.jsxs)(d.Z,{children:[(0,n.jsxs)(Z.Z,{flexDirection:m?"column":"row",children:[(0,n.jsxs)(h.Z,{my:[2,0],children:[(0,n.jsx)(O.Z,{items:[{label:"Buy",id:1},{label:"Sell",id:0}],selectedItemId:i?1:0,onChange:function(e){c(1===e),(0,w.Z)(g.g.BoardIsBuyToggle,{marketName:t.name,marketAddress:t.address,boardId:null===l||void 0===l?void 0:l.id,expiryTimestamp:null===l||void 0===l?void 0:l.expiryTimestamp,isCall:r,isBuy:1===e})},mr:4}),(0,n.jsx)(O.Z,{items:[{label:"Call",id:1},{label:"Put",id:0}],selectedItemId:r?1:0,onChange:function(e){f(1===e),(0,w.Z)(g.g.BoardIsCallToggle,{marketName:t.name,marketAddress:t.address,boardId:null===l||void 0===l?void 0:l.id,expiryTimestamp:null===l||void 0===l?void 0:l.expiryTimestamp,isBuy:i,isCall:1===e})}})]}),(0,n.jsx)(x.Z,{my:[2,0],ml:[0,"auto"],minWidth:m?void 0:350,label:0===p.length?"No Expiries":l?"Expires ".concat((0,C.Z)(l.expiryTimestamp,!0)):"Expiry does not exist",isOpen:b,onClose:P,onClick:function(){return k(!0)},isDisabled:!p.length,children:p.map((function(e){return(0,n.jsx)(j.Z,{isSelected:e.id===(null===l||void 0===l?void 0:l.id),onClick:function(){u(e),(0,w.Z)(g.g.BoardExpirySelect,{marketName:t.name,marketAddress:t.address,boardId:e.id,expiryTimestamp:e.expiryTimestamp,isBuy:i,isCall:r}),P()},label:(0,C.Z)(e.expiryTimestamp,!0)},e.id)}))})]}),m?(0,n.jsx)(S.Z,{}):null,l?(0,n.jsx)(fe,{board:l,isCall:r,isBuy:i,onSelectOption:s,selectedOption:a}):null]})},pe=r(56042),me=r(52895),ye=r(55169),ve=r(92675),be=r(41460),ge=r(90473),ke=r(51944),xe=r(9570),je=r(95815),Oe=r(25178),Ze=(0,a.Z)((function(e){var t=e.market,r=(0,Oe.ZP)(t.address,je.r.OneDay),o=r[r.length-1],a=o.change>=0?"primaryText":"errorText";return(0,n.jsxs)(B.Z,{width:80,flexDirection:"column",alignItems:"flex-end",children:[(0,n.jsx)(m.Z,{variant:"secondary",children:(0,i.Z)(o.price)}),(0,n.jsx)(m.Z,{color:a,variant:"small",children:(0,A.Z)(o.change)})]})}),(function(){return(0,n.jsxs)(B.Z,{width:80,flexDirection:"column",alignItems:"flex-end",children:[(0,n.jsx)(xe.Z,{variant:"secondary",width:80}),(0,n.jsx)(xe.Z,{variant:"small",width:50})]})}));function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Se(e,t,r[t])}))}return e}function we(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Pe=(0,a.Z)((function(e){var t=e.selectedMarket,r=e.onChangeMarket,i=we(e,["selectedMarket","onChangeMarket"]),a=(0,o.useState)(!1),l=a[0],s=a[1],u=(0,o.useCallback)((function(){return s(!1)}),[]),c=(0,ve.Z)(),d=(0,o.useMemo)((function(){return c.filter((function(e){return e.liveBoards().length>0}))}),[c]);return(0,n.jsx)(x.Z,Ce({},i,{isOpen:l,onClose:u,onClick:function(){return s(!0)},size:"lg",textVariant:"title",ml:-3,isTransparent:!0,label:(0,be.Z)(t.baseToken.symbol),leftIcon:(0,n.jsx)(ye.Z,{size:32,name:t.name}),children:d.map((function(e){return(0,n.jsx)(j.Z,{onClick:function(){(0,w.Z)(g.g.BoardMarketSelect,{marketName:e.name,marketAddress:e.address}),r(e)},isSelected:(0,ke.Z)(e,t.address),label:(0,be.Z)(e.baseToken.symbol),href:(0,ge.Z)({page:k.u.Trade,marketAddressOrName:e.name}),icon:(0,n.jsx)(ye.Z,{size:32,name:e.name}),rightContent:(0,n.jsx)(Ze,{market:e})},e.address)}))}))}),(function(e){var t=e.selectedMarket,r=(e.onChangeMarket,we(e,["selectedMarket","onChangeMarket"]));return(0,n.jsx)(D.ZP,Ce({},r,{size:"lg",textVariant:"title",ml:-3,isTransparent:!0,rightIcon:(0,n.jsx)(P.ZP,{size:"sm"}),label:(0,be.Z)(t.baseToken.symbol),leftIcon:(0,n.jsx)(ye.Z,{size:32,name:t.name})}))})),Te=r(79693),Be=r(10232),Ee=r(62848),Ie=r(70614),Ae=(0,a.Z)((function(e){var t=e.marketAddressOrName,r=e.isExpanded,i=e.onToggleExpanded,a=(0,Ie.Z)(),s=(0,l.ZP)(t),u=(0,o.useMemo)((function(){return a.filter((function(e){return e.marketAddress===(null===s||void 0===s?void 0:s.address)})).sort((function(e,t){return e.expiryTimestamp-t.expiryTimestamp}))}),[a,s]),c=(0,v.useRouter)();return 0===u.length?null:(0,n.jsx)(d.Z,{variant:"modal",sx:{borderBottomRightRadius:"0px !important",borderBottomLeftRadius:"0px !important"},children:(0,n.jsx)(f.Z,{noPadding:!0,children:(0,n.jsx)(Te.Z,{onClick:function(){var e=!r;i(e),(0,w.Z)(e?g.g.BoardOpenPositionsExpand:g.g.BoardOpenPositionsCollapse,{marketName:null===s||void 0===s?void 0:s.name,marketAddress:null===s||void 0===s?void 0:s.address,numPositions:a.length})},header:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.Z,{variant:"heading",children:"Open Positions"}),(0,n.jsx)(Be.Z,{ml:2,variant:"primary",label:u.length.toString()}),(0,n.jsx)(p.Z,{size:18,ml:"auto",color:"secondaryText",icon:r?p.T.Minimize2:p.T.Maximize2})]}),isExpanded:r,maxHeight:"35vh",children:(0,n.jsx)(Ee.Z,{positions:u,onClick:function(e){return c.push((0,ge.Z)({page:k.u.Position,marketAddressOrName:e.marketName,positionId:e.id}))}})})})})})),Me=r(77989),Ne=r(81547),_e=r(90070),De=function(e){var t=e.marketAddressOrName,r=(0,o.useState)(je.r.OneDay),i=r[0],a=r[1],l=(0,o.useState)(null),s=l[0],u=l[1],c=(0,y.Z)();return(0,n.jsx)(d.Z,{children:(0,n.jsxs)(f.Z,{pt:c?0:6,children:[(0,n.jsxs)(B.Z,{alignItems:"flex-start",children:[(0,n.jsx)(_e.Z,{marketAddressOrName:t,period:i,hoverSpotPrice:s}),c?null:(0,n.jsx)(Me.Z,{ml:"auto",period:i,onChangePeriod:a})]}),(0,n.jsx)(Ne.Z,{onHover:u,hoverSpotPrice:s,height:[120,200],marketAddressOrName:t,period:i}),c?(0,n.jsx)(h.Z,{mt:2,children:(0,n.jsx)(Me.Z,{period:i,onChangePeriod:a})}):null]})})},Re=r(68874);function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qe=r(42804),He=r(93314);function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e){var t,r=e.market,a=(0,o.useState)(r),l=a[0],s=a[1],u=(0,o.useState)(!1),c=u[0],x=u[1],j=(0,v.useRouter)().push,O=(0,o.useState)(null),Z=O[0],S=O[1],C=Xe(function(e){var t,r,n,i=e.block.timestamp,a=(0,o.useMemo)((function(){return e.liveBoards().sort((function(e,t){return e.expiryTimestamp-t.expiryTimestamp}))}),[e]),l=(0,o.useMemo)((function(){return null!==(t=a.find((function(e){return e.tradingCutoffTimestamp>i})))&&void 0!==t?t:null}),[a,i]),s=Fe((0,Re.Z)("expiry"),2),u=s[0],c=s[1],d=(0,o.useMemo)((function(){return null!==(r=a.find((function(e){return e.id===u||e.expiryTimestamp===u})))&&void 0!==r?r:null}),[u,a]),f=(0,o.useCallback)((function(e){e&&e.id!==(null===l||void 0===l?void 0:l.id)?c(e.expiryTimestamp):c(null)}),[c,l]);return[null!==(n=null!==d&&void 0!==d?d:l)&&void 0!==n?n:null,f]}(l),2),P=C[0],T=C[1],B=(0,o.useState)(!0),E=B[0],I=B[1],A=(0,o.useState)(!0),M=A[0],N=A[1],_=null!==(t=null===Z||void 0===Z?void 0:Z.strike().id)&&void 0!==t?t:null,D=(0,o.useState)(!1),R=D[0],L=D[1],F=(0,o.useCallback)((function(e,t){j((0,ge.Z)({page:k.u.Position,marketAddressOrName:e.name,positionId:t})).then((function(){S(null)}))}),[j,S]),q=(0,o.useCallback)((function(e){e.address!==l.address&&(T(null),S(null),s(e),j((0,ge.Z)({page:k.u.Trade,marketAddressOrName:e.name}),void 0,{shallow:!0}))}),[l.address,j,T]),H=(0,y.Z)();return(0,n.jsx)(qe.Z,{mobileCollapsedHeader:"".concat((0,be.Z)(l.baseToken.symbol)," ").concat((0,i.Z)(l.spotPrice)),desktopRightColumn:(0,n.jsx)(d.Z,{minHeight:b.cb,overflowY:"auto",children:Z?(0,n.jsx)(pe.Z,{isBuy:M,option:Z,onTrade:F}):(0,n.jsxs)(f.Z,{flexGrow:1,children:[(0,n.jsx)(m.Z,{variant:"heading",children:"Select Option"}),(0,n.jsxs)(h.Z,{flexGrow:1,flexDirection:"column",children:[(0,n.jsx)(p.Z,{icon:p.T.PlusCircle,color:"disabledText",size:64,strokeWidth:.5}),(0,n.jsx)(m.Z,{mt:4,variant:"secondary",color:"secondaryText",children:"Select an option"})]})]})}),header:(0,n.jsx)(Pe,{onChangeMarket:q,selectedMarket:l}),desktopFooter:(0,n.jsx)(Ae,{marketAddressOrName:l.address,isExpanded:c,onToggleExpanded:x}),children:(0,n.jsxs)(He.Z,{children:[(0,n.jsx)(De,{marketAddressOrName:l.address}),(0,n.jsx)(he,{isCall:E,onToggleCall:function(e){e!==E&&S(null),I(e)},isBuy:M,onToggleBuy:function(e){N(e)},market:l,selectedBoard:P,onSelectBoard:function(e){e.id!==(null===P||void 0===P?void 0:P.id)&&S(null),T(e)},selectedOption:Z,onSelectOption:function(e){var t=_!==e.strike().id;t?(S(e),L(!0)):(L(!1),S(null)),(0,w.Z)(t?g.g.BoardOptionSelect:g.g.BoardOptionDeslect,{marketName:l.name,marketAddress:l.address,isCall:E,strikeId:e.strike().id,strikePrice:e.strike().strikePrice,boardId:e.board().id,expiryTimestamp:e.board().expiryTimestamp})}}),Z&&H?(0,n.jsx)(me.Z,{option:Z,isBuy:M,onTrade:F,isOpen:R,onClose:function(){L(!1),S(null)}}):null]})})}var Ve=(0,a.Z)((function(e){var t=e.marketName,r=(0,l.ZP)(t);return r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{title:"".concat(r.name," ").concat((0,i.Z)(r.spotPrice))}),(0,n.jsx)(ze,{market:r})]}):(0,n.jsx)(s.Z,{error:"Market does not exist"})}),(function(){return(0,n.jsx)(u.Z,{})})),$e=!0,Ge=Ve},51944:function(e,t,r){function n(e,t){return e.address.toLowerCase()===t.toLowerCase()||e.name.toLowerCase()===t.toLowerCase()}r.d(t,{Z:function(){return n}})},62146:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(27378),o=(n=i)&&n.__esModule?n:{default:n};t.default=function(){return o.default.createElement("svg",{width:"14",height:"11",viewBox:"0 0 14 11"},o.default.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}))}},60439:function(e,t,r){var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(27378),a=f(o),l=f(r(60042)),s=f(r(23615)),u=f(r(62146)),c=f(r(12056)),d=r(19396);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handleClick=r.handleClick.bind(r),r.handleTouchStart=r.handleTouchStart.bind(r),r.handleTouchMove=r.handleTouchMove.bind(r),r.handleTouchEnd=r.handleTouchEnd.bind(r),r.handleFocus=r.handleFocus.bind(r),r.handleBlur=r.handleBlur.bind(r),r.previouslyChecked=!(!e.checked&&!e.defaultChecked),r.state={checked:!(!e.checked&&!e.defaultChecked),hasFocus:!1},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidUpdate",value:function(e){e.checked!==this.props.checked&&this.setState({checked:!!this.props.checked})}},{key:"handleClick",value:function(e){if(!this.props.disabled){var t=this.input;if(e.target!==t&&!this.moved)return this.previouslyChecked=t.checked,e.preventDefault(),t.focus(),void t.click();var r=this.props.hasOwnProperty("checked")?this.props.checked:t.checked;this.setState({checked:r})}}},{key:"handleTouchStart",value:function(e){this.props.disabled||(this.startX=(0,d.pointerCoord)(e).x,this.activated=!0)}},{key:"handleTouchMove",value:function(e){if(this.activated&&(this.moved=!0,this.startX)){var t=(0,d.pointerCoord)(e).x;this.state.checked&&t+15<this.startX?(this.setState({checked:!1}),this.startX=t,this.activated=!0):t-15>this.startX&&(this.setState({checked:!0}),this.startX=t,this.activated=t<this.startX+5)}}},{key:"handleTouchEnd",value:function(e){if(this.moved){var t=this.input;if(e.preventDefault(),this.startX){var r=(0,d.pointerCoord)(e).x;!0===this.previouslyChecked&&this.startX+4>r?this.previouslyChecked!==this.state.checked&&(this.setState({checked:!1}),this.previouslyChecked=this.state.checked,t.click()):this.startX-4<r&&this.previouslyChecked!==this.state.checked&&(this.setState({checked:!0}),this.previouslyChecked=this.state.checked,t.click()),this.activated=!1,this.startX=null,this.moved=!1}}}},{key:"handleFocus",value:function(e){var t=this.props.onFocus;t&&t(e),this.setState({hasFocus:!0})}},{key:"handleBlur",value:function(e){var t=this.props.onBlur;t&&t(e),this.setState({hasFocus:!1})}},{key:"getIcon",value:function(e){var r=this.props.icons;return r?void 0===r[e]?t.defaultProps.icons[e]:r[e]:null}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,i=(t.icons,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["className","icons"])),o=(0,l.default)("react-toggle",{"react-toggle--checked":this.state.checked,"react-toggle--focus":this.state.hasFocus,"react-toggle--disabled":this.props.disabled},r);return a.default.createElement("div",{className:o,onClick:this.handleClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd},a.default.createElement("div",{className:"react-toggle-track"},a.default.createElement("div",{className:"react-toggle-track-check"},this.getIcon("checked")),a.default.createElement("div",{className:"react-toggle-track-x"},this.getIcon("unchecked"))),a.default.createElement("div",{className:"react-toggle-thumb"}),a.default.createElement("input",n({},i,{ref:function(t){e.input=t},onFocus:this.handleFocus,onBlur:this.handleBlur,className:"react-toggle-screenreader-only",type:"checkbox"})))}}]),t}(o.PureComponent);t.Z=h,h.displayName="Toggle",h.defaultProps={icons:{checked:a.default.createElement(u.default,null),unchecked:a.default.createElement(c.default,null)}},h.propTypes={checked:s.default.bool,disabled:s.default.bool,defaultChecked:s.default.bool,onChange:s.default.func,onFocus:s.default.func,onBlur:s.default.func,className:s.default.string,name:s.default.string,value:s.default.string,id:s.default.string,"aria-labelledby":s.default.string,"aria-label":s.default.string,icons:s.default.oneOfType([s.default.bool,s.default.shape({checked:s.default.node,unchecked:s.default.node})])}},19396:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.pointerCoord=function(e){if(e){var t=e.changedTouches;if(t&&t.length>0){var r=t[0];return{x:r.clientX,y:r.clientY}}var n=e.pageX;if(void 0!==n)return{x:n,y:e.pageY}}return{x:0,y:0}}},12056:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(27378),o=(n=i)&&n.__esModule?n:{default:n};t.default=function(){return o.default.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},o.default.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"}))}}}]);